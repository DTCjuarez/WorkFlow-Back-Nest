# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type RepuestoType {
  id: String!
  cantidadReserva: Float
  marca: String
  producto: String
  cantidad: Float!
  precio: Float
}

type CarInfo {
  id: String!
  placa: String!
  fechaSoat: DateTime!
  vigenciaContrato: DateTime!
  cliente: String!
  propietario: String!
  kmActual: Float!
  Puntaje: Float!
  Mantenimientos: [MantenimientoInfo!]
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type MantenimientoInfo {
  id: String!
  fecha: DateTime!
  tipo: String!
  repuestosUsados: Float!
}

type MantenimientoInfoDto {
  placa: String!
  tipo: String
  tecnico: String
  estado: String
  kmPrevio: Float
  kmMedido: Float
  cliente: String
  fecha: DateTime
  fechaInicio: DateTime
  fechaFin: DateTime
  fechaSoat: DateTime
  anotaciones: String
  diagnostico: String
  diagnosticoFinal: String
  repuestos: [RepuestoType!]
  repuestosAjuste: [RepuestoType!]
  documentos: [String!]
}

type MantenimientoResult {
  cantidad: Int!
  mantenimientos: [MantenimientoInfoDto!]!
}

type RepuestoType2 {
  _id: String!
  cantidadReserva: Float
  marca: String
  producto: String
  cantidad: Float!
  precio: Float
}

type MantenimientoInfoDto2 {
  _id: String!
  placa: String!
  tipo: String
  tecnico: String
  estado: String
  kmPrevio: Float
  kmMedido: Float
  cliente: String
  fecha: DateTime
  fechaInicio: DateTime
  fechaFin: DateTime
  fechaSoat: DateTime
  anotaciones: String
  diagnostico: String
  diagnosticoFinal: String
  repuestos: [RepuestoType2!]
  repuestosAjuste: [RepuestoType2!]
  documentos: [String!]
}

type HomeAdminDTO {
  cantidadProgramada: Int!
  cantidadTotal: Int!
  mantenimientos: [MantenimientoInfoDto2!]!
}

type GetPlacasDto {
  _id: String!
  placa: String!
  cliente: String!
  fechaSoat: DateTime!
}

type Query {
  """
  Esta función retorna una matriz con las fechas de los mantenimientos que tengan de estado "programado"
  """
  calendar: [DateTime!]!

  """Esta funcion retorna la informacion de un mantenimiento por id"""
  Mantenimiento_Info_por_ID(id: String!): MantenimientoInfoDto!

  """
  Esta funcion se usa en el home del admin y retorna la cantidad de mantenimientos programados, la cantidad total de mantenimientos y los mantenimientos programados
  """
  home_admin(fecha: DateTime!): HomeAdminDTO!

  """
  Esta Función retorna la información de un auto ademas de sus mantenimientos (id, fecha, tipo, repuestosUsados) por medio de su placa
  """
  admin_history_cars(placa: String!): CarInfo!

  """
  Esta funcion retorna la cantidad de mantenimientos por estado y los mantenimientos (información compleja) por estado y fecha
  """
  mantenimientoChanges(estado: String!, fecha: DateTime!): MantenimientoResult!

  """
  Esta Función retorna la información de los carros (id, placa, cliente, fechaSoat)
  """
  obtener_info_placas: [GetPlacasDto!]!

  """
  Esta Función retorna la información de todos los repuestos (id, producto, marca, cantidad, cantidadReserva, precio)
  """
  obtener_todos_los_repuestos: [RepuestoType!]!
}

type Mutation {
  createUser(username: CreateUserDto!): Boolean!
  updatePassword(username: String!, newPassword: String!): Boolean!

  """
  Esta función cambia el estado de un mantenimiento a "revision" y realiza una corrección de repuestos, esta corrección es quitar los repuestos que estaban reservados
  """
  cambiar_estado_revision(id: String!, cambiosSolicitados: String!): Boolean!

  """Esta funcion programa un mantenimiento"""
  programar_mantenimiento(programarMantInput: PrograMantenimientoDto!): String!

  """
  Esta funcion registra un mantenimiento que no haya sido previamente programado, ademas en el apartado de repuestos, solo pide entregar una id y la cantidad
  """
  regisrar_mantenimiento_no_programado(updateOneMantenimientoInput: UpdateOneMantenimientoDto!): String!

  """
  Esta Función registra un mantenimiento que ya haya sido previamente programado, ademas en el apartado de repuestos, pide entregar una id y la cantidad
  """
  regisrar_mantenimiento_programado(registrarMantInput: UpdateMantenimientoDto!): String!

  """
  Esta función actualiza el campo diagnosticoFinal de un mantenimiento y cambia su estado a "completado"
  """
  completar_mantenimiento(id: String!, diagnosticoFinal: String!): String!

  """Esta Función registra un auto en la base de datos"""
  crear_auto(createCarInput: CreateCarDto!): Boolean!

  """
  Esta Función registra un repuesto en la base de datos y retorna true si se registro correctamente
  """
  crear_repuesto(createRepuestoInput: CreateRepuestoDto!): Boolean!

  """
  Esta Función se usa internamente para actualizar repuestos en la base de datos y retorna true si se actualizo correctamente, no usar en el cliente
  """
  verficar_repuestos(verifyRepuestoInput: VerifyRepuestoDto!): Boolean!

  """
  Esta Función registra una factura en la base de datos y retorna el id de la factura creada
  """
  crear_factura(createFacturaInput: CreateFacturaDto!): String!
}

input CreateUserDto {
  name: String!
  username: String!
  email: String!
  password: String!
  clienteAsociado: String
  nivelUser: String!
}

input PrograMantenimientoDto {
  placa: String!
  tipo: String!
  tecnico: String!
  fecha: DateTime!
  anotaciones: String!
}

input UpdateOneMantenimientoDto {
  placa: String!
  tipo: String!
  tecnico: String!
  fecha: DateTime!
  kmMedido: Float!
  fechaInicio: DateTime!
  diagnostico: String!
  repuestos: [RepuestoDto!]
}

input RepuestoDto {
  id: String!
  cantidadReserva: Float
  marca: String!
  producto: String!
  cantidad: Float!
  precio: Float
}

input UpdateMantenimientoDto {
  _id: String!
  kmMedido: Float!
  fechaInicio: DateTime!
  fecha: DateTime!
  diagnostico: String!
  repuestos: [RepuestoDto!]
}

input CreateCarDto {
  placa: String!
  propietario: String!
  cliente: String!
  fechaSoat: DateTime!
  kmRegistroInicial: Int!
  fechaRevision: DateTime!
  vigenciaContrato: DateTime!
  puntaje: Int
}

input CreateRepuestoDto {
  cantidadReserva: Float!
  marca: String!
  producto: String!
  cantidad: Float!
  precio: Float!
}

input VerifyRepuestoDto {
  repuestos: [RepuestoDto!]
}

input CreateFacturaDto {
  numeroFactura: String
  monto: Float!
  igv: Float
  detraccion: Float
  tipo: String!
  notificacion: Boolean!
  fecha: DateTime!
  involucrado: String
  documentos: [String!]
}